"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1675],{83287:function(t,r,n){n.d(r,{W:function(){return WagmiConnector}});var l=n(22555),h=n(65007);let WagmiConnector=class WagmiConnector extends h.Z{constructor(t){let{chains:r=l.gL9,options:n}=t;super(),this.chains=r,this.options=n}getBlockExplorerUrls(t){let r=t.explorers?.map(t=>t.url)??[];return r.length>0?r:void 0}isChainUnsupported(t){return!this.chains.some(r=>r.chainId===t)}updateChains(t){this.chains=t}}},59014:function(t,r,n){n.d(r,{n:function(){return normalizeChainId}});function normalizeChainId(t){return"string"==typeof t?Number.parseInt(t,"0x"===t.trim().substring(0,2)?16:10):"bigint"==typeof t?Number(t):t}},91675:function(t,r,n){let l;n.d(r,{MagicAuthConnector:function(){return MagicAuthConnector}});var h,y,E,b,A,S,D,U,H,q,K,ee,et,er,ei,eo=n(16074),ea=n(69552),es=n(59014),ec=n(241),eu=n(19485),el=((h=el||{}).MissingApiKey="MISSING_API_KEY",h.ModalNotReady="MODAL_NOT_READY",h.MalformedResponse="MALFORMED_RESPONSE",h.InvalidArgument="INVALID_ARGUMENT",h.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",h.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",h),ef=((y=ef||{}).SyncWeb3Method="SYNC_WEB3_METHOD",y.DuplicateIframe="DUPLICATE_IFRAME",y.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",y.DeprecationNotice="DEPRECATION_NOTICE",y),ed=((E=ed||{})[E.ParseError=-32700]="ParseError",E[E.InvalidRequest=-32600]="InvalidRequest",E[E.MethodNotFound=-32601]="MethodNotFound",E[E.InvalidParams=-32602]="InvalidParams",E[E.InternalError=-32603]="InternalError",E[E.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",E[E.MagicLinkExpired=-10001]="MagicLinkExpired",E[E.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",E[E.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",E[E.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",E[E.UpdateEmailFailed=-10004]="UpdateEmailFailed",E[E.UserRequestEditEmail=-10005]="UserRequestEditEmail",E[E.InactiveRecipient=-10010]="InactiveRecipient",E[E.AccessDeniedToUser=-10011]="AccessDeniedToUser",E),eh=((b=eh||{}).LoginWithSms="magic_auth_login_with_sms",b.LoginWithEmailOTP="magic_auth_login_with_email_otp",b.LoginWithMagicLink="magic_auth_login_with_magic_link",b.LoginWithCredential="magic_auth_login_with_credential",b.GetIdToken="magic_auth_get_id_token",b.GenerateIdToken="magic_auth_generate_id_token",b.GetMetadata="magic_auth_get_metadata",b.IsLoggedIn="magic_auth_is_logged_in",b.Logout="magic_auth_logout",b.UpdateEmail="magic_auth_update_email",b.UserSettings="magic_auth_settings",b.UserSettingsTestMode="magic_auth_settings_testing_mode",b.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",b.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",b.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",b.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",b.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",b.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",b.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",b.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",b.LogoutTestMode="magic_auth_logout_testing_mode",b.UpdateEmailTestMode="magic_auth_update_email_testing_mode",b.IntermediaryEvent="magic_intermediary_event",b.RequestAccounts="eth_requestAccounts",b.GetInfo="mc_get_wallet_info",b.ShowUI="mc_wallet",b.NFTPurchase="magic_nft_purchase",b.RequestUserInfoWithUI="mc_request_user_info",b.Disconnect="mc_disconnect",b.UpdatePhoneNumber="magic_auth_update_phone_number",b.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",b.RecoverAccount="magic_auth_recover_account",b.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",b),ep=((A=ep||{}).MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",A.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",A.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",A.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",A.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",A),em=((S=em||{}).MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",S),ev=((D=ev||{}).Harmony="HARMONY",D),ey=n(34155),eg=Object.create,e_=Object.defineProperty,eE=Object.defineProperties,eI=Object.getOwnPropertyDescriptor,eb=Object.getOwnPropertyDescriptors,ew=Object.getOwnPropertyNames,eA=Object.getOwnPropertySymbols,eR=Object.getPrototypeOf,eS=Object.prototype.hasOwnProperty,eN=Object.prototype.propertyIsEnumerable,Ce=(t,r,n)=>r in t?e_(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,Z=(t,r)=>{for(var n in r||(r={}))eS.call(r,n)&&Ce(t,n,r[n]);if(eA)for(var n of eA(r))eN.call(r,n)&&Ce(t,n,r[n]);return t},De=(t,r)=>eE(t,eb(r)),x=(t,r,n)=>new Promise((l,h)=>{var s=t=>{try{i(n.next(t))}catch(t){h(t)}},a=t=>{try{i(n.throw(t))}catch(t){h(t)}},i=t=>t.done?l(t.value):Promise.resolve(t.value).then(s,a);i((n=n.apply(t,r)).next())}),eO=(U=(t,r)=>{var n=Object.prototype.hasOwnProperty,l="~";function B(){}function Mn(t,r,n){this.fn=t,this.context=r,this.once=n||!1}function ct(t,r,n,h,y){if("function"!=typeof n)throw TypeError("The listener must be a function");var E=new Mn(n,h||t,y),b=l?l+r:r;return t._events[b]?t._events[b].fn?t._events[b]=[t._events[b],E]:t._events[b].push(E):(t._events[b]=E,t._eventsCount++),t}function ie(t,r){0==--t._eventsCount?t._events=new B:delete t._events[r]}function R(){this._events=new B,this._eventsCount=0}Object.create&&(B.prototype=Object.create(null),new B().__proto__||(l=!1)),R.prototype.eventNames=function(){var t,r,h=[];if(0===this._eventsCount)return h;for(r in t=this._events)n.call(t,r)&&h.push(l?r.slice(1):r);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(t)):h},R.prototype.listeners=function(t){var r=l?l+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var h=0,y=n.length,E=Array(y);h<y;h++)E[h]=n[h].fn;return E},R.prototype.listenerCount=function(t){var r=l?l+t:t,n=this._events[r];return n?n.fn?1:n.length:0},R.prototype.emit=function(t,r,n,h,y,E){var b=l?l+t:t;if(!this._events[b])return!1;var A,S,D=this._events[b],U=arguments.length;if(D.fn){switch(D.once&&this.removeListener(t,D.fn,void 0,!0),U){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,r),!0;case 3:return D.fn.call(D.context,r,n),!0;case 4:return D.fn.call(D.context,r,n,h),!0;case 5:return D.fn.call(D.context,r,n,h,y),!0;case 6:return D.fn.call(D.context,r,n,h,y,E),!0}for(S=1,A=Array(U-1);S<U;S++)A[S-1]=arguments[S];D.fn.apply(D.context,A)}else{var H,q=D.length;for(S=0;S<q;S++)switch(D[S].once&&this.removeListener(t,D[S].fn,void 0,!0),U){case 1:D[S].fn.call(D[S].context);break;case 2:D[S].fn.call(D[S].context,r);break;case 3:D[S].fn.call(D[S].context,r,n);break;case 4:D[S].fn.call(D[S].context,r,n,h);break;default:if(!A)for(H=1,A=Array(U-1);H<U;H++)A[H-1]=arguments[H];D[S].fn.apply(D[S].context,A)}}return!0},R.prototype.on=function(t,r,n){return ct(this,t,r,n,!1)},R.prototype.once=function(t,r,n){return ct(this,t,r,n,!0)},R.prototype.removeListener=function(t,r,n,h){var y=l?l+t:t;if(!this._events[y])return this;if(!r)return ie(this,y),this;var E=this._events[y];if(E.fn)E.fn!==r||h&&!E.once||n&&E.context!==n||ie(this,y);else{for(var b=0,A=[],S=E.length;b<S;b++)(E[b].fn!==r||h&&!E[b].once||n&&E[b].context!==n)&&A.push(E[b]);A.length?this._events[y]=1===A.length?A[0]:A:ie(this,y)}return this},R.prototype.removeAllListeners=function(t){var r;return t?(r=l?l+t:t,this._events[r]&&ie(this,r)):(this._events=new B,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=l,R.EventEmitter=R,"u">typeof r&&(r.exports=R)},()=>(H||U((H={exports:{}}).exports,H),H.exports)),eT={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},eM="object"==typeof ey&&ey.env&&ey.env.NODE_DEBUG&&/\bsemver\b/i.test(ey.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},eL=(function(t,r){let{MAX_SAFE_COMPONENT_LENGTH:n}=eT,l=(r=t.exports={}).re=[],h=r.src=[],y=r.t={},E=0,i=(t,r,n)=>{let b=E++;eM(b,r),y[t]=b,h[b]=r,l[b]=new RegExp(r,n?"g":void 0)};i("NUMERICIDENTIFIER","0|[1-9]\\d*"),i("NUMERICIDENTIFIERLOOSE","[0-9]+"),i("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),i("MAINVERSION",`(${h[y.NUMERICIDENTIFIER]})\\.(${h[y.NUMERICIDENTIFIER]})\\.(${h[y.NUMERICIDENTIFIER]})`),i("MAINVERSIONLOOSE",`(${h[y.NUMERICIDENTIFIERLOOSE]})\\.(${h[y.NUMERICIDENTIFIERLOOSE]})\\.(${h[y.NUMERICIDENTIFIERLOOSE]})`),i("PRERELEASEIDENTIFIER",`(?:${h[y.NUMERICIDENTIFIER]}|${h[y.NONNUMERICIDENTIFIER]})`),i("PRERELEASEIDENTIFIERLOOSE",`(?:${h[y.NUMERICIDENTIFIERLOOSE]}|${h[y.NONNUMERICIDENTIFIER]})`),i("PRERELEASE",`(?:-(${h[y.PRERELEASEIDENTIFIER]}(?:\\.${h[y.PRERELEASEIDENTIFIER]})*))`),i("PRERELEASELOOSE",`(?:-?(${h[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[y.PRERELEASEIDENTIFIERLOOSE]})*))`),i("BUILDIDENTIFIER","[0-9A-Za-z-]+"),i("BUILD",`(?:\\+(${h[y.BUILDIDENTIFIER]}(?:\\.${h[y.BUILDIDENTIFIER]})*))`),i("FULLPLAIN",`v?${h[y.MAINVERSION]}${h[y.PRERELEASE]}?${h[y.BUILD]}?`),i("FULL",`^${h[y.FULLPLAIN]}$`),i("LOOSEPLAIN",`[v=\\s]*${h[y.MAINVERSIONLOOSE]}${h[y.PRERELEASELOOSE]}?${h[y.BUILD]}?`),i("LOOSE",`^${h[y.LOOSEPLAIN]}$`),i("GTLT","((?:<|>)?=?)"),i("XRANGEIDENTIFIERLOOSE",`${h[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),i("XRANGEIDENTIFIER",`${h[y.NUMERICIDENTIFIER]}|x|X|\\*`),i("XRANGEPLAIN",`[v=\\s]*(${h[y.XRANGEIDENTIFIER]})(?:\\.(${h[y.XRANGEIDENTIFIER]})(?:\\.(${h[y.XRANGEIDENTIFIER]})(?:${h[y.PRERELEASE]})?${h[y.BUILD]}?)?)?`),i("XRANGEPLAINLOOSE",`[v=\\s]*(${h[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[y.XRANGEIDENTIFIERLOOSE]})(?:${h[y.PRERELEASELOOSE]})?${h[y.BUILD]}?)?)?`),i("XRANGE",`^${h[y.GTLT]}\\s*${h[y.XRANGEPLAIN]}$`),i("XRANGELOOSE",`^${h[y.GTLT]}\\s*${h[y.XRANGEPLAINLOOSE]}$`),i("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),i("COERCERTL",h[y.COERCE],!0),i("LONETILDE","(?:~>?)"),i("TILDETRIM",`(\\s*)${h[y.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",i("TILDE",`^${h[y.LONETILDE]}${h[y.XRANGEPLAIN]}$`),i("TILDELOOSE",`^${h[y.LONETILDE]}${h[y.XRANGEPLAINLOOSE]}$`),i("LONECARET","(?:\\^)"),i("CARETTRIM",`(\\s*)${h[y.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",i("CARET",`^${h[y.LONECARET]}${h[y.XRANGEPLAIN]}$`),i("CARETLOOSE",`^${h[y.LONECARET]}${h[y.XRANGEPLAINLOOSE]}$`),i("COMPARATORLOOSE",`^${h[y.GTLT]}\\s*(${h[y.LOOSEPLAIN]})$|^$`),i("COMPARATOR",`^${h[y.GTLT]}\\s*(${h[y.FULLPLAIN]})$|^$`),i("COMPARATORTRIM",`(\\s*)${h[y.GTLT]}\\s*(${h[y.LOOSEPLAIN]}|${h[y.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",i("HYPHENRANGE",`^\\s*(${h[y.XRANGEPLAIN]})\\s+-\\s+(${h[y.XRANGEPLAIN]})\\s*$`),i("HYPHENRANGELOOSE",`^\\s*(${h[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[y.XRANGEPLAINLOOSE]})\\s*$`),i("STAR","(<|>)?=?\\s*\\*"),i("GTE0","^\\s*>=\\s*0.0.0\\s*$"),i("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(l={exports:{}},l.exports),l.exports),e$=/^[0-9]+$/,Xe=(t,r)=>{let n=e$.test(t),l=e$.test(r);return n&&l&&(t=+t,r=+r),t===r?0:n&&!l?-1:l&&!n?1:t<r?-1:1},{MAX_LENGTH:eC,MAX_SAFE_INTEGER:eP}=eT,{re:ex,t:ej}=eL,{compareIdentifiers:ek}={compareIdentifiers:Xe,rcompareIdentifiers:(t,r)=>Xe(r,t)},eD=class{constructor(t,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),t instanceof eD){if(!!r.loose===t.loose&&!!r.includePrerelease===t.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw TypeError(`Invalid Version: ${t}`);if(t.length>eC)throw TypeError(`version is longer than ${eC} characters`);eM("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?ex[ej.LOOSE]:ex[ej.FULL]);if(!n)throw TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>eP||this.major<0)throw TypeError("Invalid major version");if(this.minor>eP||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>eP||this.patch<0)throw TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){let r=+t;if(r>=0&&r<eP)return r}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(eM("SemVer.compare",this.version,this.options,t),!(t instanceof eD)){if("string"==typeof t&&t===this.version)return 0;t=new eD(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof eD||(t=new eD(t,this.options)),ek(this.major,t.major)||ek(this.minor,t.minor)||ek(this.patch,t.patch)}comparePre(t){if(t instanceof eD||(t=new eD(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],l=t.prerelease[r];if(eM("prerelease compare",r,n,l),void 0===n&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===n)return -1;if(n!==l)return ek(n,l)}while(++r)}compareBuild(t){t instanceof eD||(t=new eD(t,this.options));let r=0;do{let n=this.build[r],l=t.build[r];if(eM("prerelease compare",r,n,l),void 0===n&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===n)return -1;if(n!==l)return ek(n,l)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",r),this.inc("pre",r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;for(;--t>=0;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}},k=(t,r,n)=>new eD(t,n).compare(new eD(r,n)),Jt=(t,r,n)=>0===k(t,r,n),Gt=(t,r,n)=>0!==k(t,r,n),Kt=(t,r,n)=>k(t,r,n)>0,Wt=(t,r,n)=>k(t,r,n)>=0,Bt=(t,r,n)=>0>k(t,r,n),Vt=(t,r,n)=>0>=k(t,r,n),Ie=(t,r,n,l)=>{switch(r){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return Jt(t,n,l);case"!=":return Gt(t,n,l);case">":return Kt(t,n,l);case">=":return Wt(t,n,l);case"<":return Bt(t,n,l);case"<=":return Vt(t,n,l);default:throw TypeError(`Invalid operator: ${r}`)}},eU=Symbol("SemVer ANY"),eB=class{static get ANY(){return eU}constructor(t,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),t instanceof eB){if(!!r.loose===t.loose)return t;t=t.value}eM("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===eU?this.value="":this.value=this.operator+this.semver.version,eM("comp",this)}parse(t){let r=this.options.loose?eF[eG.COMPARATORLOOSE]:eF[eG.COMPARATOR],n=t.match(r);if(!n)throw TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new eD(n[2],this.options.loose):this.semver=eU}toString(){return this.value}test(t){if(eM("Comparator.test",t,this.options.loose),this.semver===eU||t===eU)return!0;if("string"==typeof t)try{t=new eD(t,this.options)}catch(t){return!1}return Ie(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof eB))throw TypeError("a Comparator is required");if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),""===this.operator)return""===this.value||new ez(t.value,r).test(this.value);if(""===t.operator)return""===t.value||new ez(this.value,r).test(t.semver);let n=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),l=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),h=this.semver.version===t.semver.version,y=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),E=Ie(this.semver,"<",t.semver,r)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),b=Ie(this.semver,">",t.semver,r)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||l||h&&y||E||b}},{re:eF,t:eG}=eL,ez=class{constructor(t,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),t instanceof ez)return!!r.loose===t.loose&&!!r.includePrerelease===t.includePrerelease?t:new ez(t.raw,r);if(t instanceof eB)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let n=r?eW[eH.HYPHENRANGELOOSE]:eW[eH.HYPHENRANGE];eM("hyphen replace",t=t.replace(n,pn(this.options.includePrerelease))),eM("comparator trim",t=t.replace(eW[eH.COMPARATORTRIM],eq),eW[eH.COMPARATORTRIM]),t=(t=(t=t.replace(eW[eH.TILDETRIM],eK)).replace(eW[eH.CARETTRIM],eV)).split(/\s+/).join(" ");let l=r?eW[eH.COMPARATORLOOSE]:eW[eH.COMPARATOR];return t.split(" ").map(t=>en(t,this.options)).join(" ").split(/\s+/).map(t=>ln(t,this.options)).filter(this.options.loose?t=>!!t.match(l):()=>!0).map(t=>new eB(t,this.options))}intersects(t,r){if(!(t instanceof ez))throw TypeError("a Range is required");return this.set.some(n=>Ke(n,r)&&t.set.some(t=>Ke(t,r)&&n.every(n=>t.every(t=>n.intersects(t,r)))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new eD(t,this.options)}catch(t){return!1}for(let r=0;r<this.set.length;r++)if(un(this.set[r],t,this.options))return!0;return!1}},{re:eW,t:eH,comparatorTrimReplace:eq,tildeTrimReplace:eK,caretTrimReplace:eV}=eL,Ke=(t,r)=>{let n=!0,l=t.slice(),h=l.pop();for(;n&&l.length;)n=l.every(t=>h.intersects(t,r)),h=l.pop();return n},en=(t,r)=>(eM("comp",t,r),eM("caret",t=rn(t,r)),eM("tildes",t=tn(t,r)),eM("xrange",t=on(t,r)),eM("stars",t=cn(t,r)),t),T=t=>!t||"x"===t.toLowerCase()||"*"===t,tn=(t,r)=>t.trim().split(/\s+/).map(t=>nn(t,r)).join(" "),nn=(t,r)=>{let n=r.loose?eW[eH.TILDELOOSE]:eW[eH.TILDE];return t.replace(n,(r,n,l,h,y)=>{let E;return eM("tilde",t,r,n,l,h,y),T(n)?E="":T(l)?E=`>=${n}.0.0 <${+n+1}.0.0-0`:T(h)?E=`>=${n}.${l}.0 <${n}.${+l+1}.0-0`:y?(eM("replaceTilde pr",y),E=`>=${n}.${l}.${h}-${y} <${n}.${+l+1}.0-0`):E=`>=${n}.${l}.${h} <${n}.${+l+1}.0-0`,eM("tilde return",E),E})},rn=(t,r)=>t.trim().split(/\s+/).map(t=>sn(t,r)).join(" "),sn=(t,r)=>{eM("caret",t,r);let n=r.loose?eW[eH.CARETLOOSE]:eW[eH.CARET],l=r.includePrerelease?"-0":"";return t.replace(n,(r,n,h,y,E)=>{let b;return eM("caret",t,r,n,h,y,E),T(n)?b="":T(h)?b=`>=${n}.0.0${l} <${+n+1}.0.0-0`:T(y)?b="0"===n?`>=${n}.${h}.0${l} <${n}.${+h+1}.0-0`:`>=${n}.${h}.0${l} <${+n+1}.0.0-0`:E?(eM("replaceCaret pr",E),b="0"===n?"0"===h?`>=${n}.${h}.${y}-${E} <${n}.${h}.${+y+1}-0`:`>=${n}.${h}.${y}-${E} <${n}.${+h+1}.0-0`:`>=${n}.${h}.${y}-${E} <${+n+1}.0.0-0`):(eM("no pr"),b="0"===n?"0"===h?`>=${n}.${h}.${y}${l} <${n}.${h}.${+y+1}-0`:`>=${n}.${h}.${y}${l} <${n}.${+h+1}.0-0`:`>=${n}.${h}.${y} <${+n+1}.0.0-0`),eM("caret return",b),b})},on=(t,r)=>(eM("replaceXRanges",t,r),t.split(/\s+/).map(t=>an(t,r)).join(" ")),an=(t,r)=>{t=t.trim();let n=r.loose?eW[eH.XRANGELOOSE]:eW[eH.XRANGE];return t.replace(n,(n,l,h,y,E,b)=>{eM("xRange",t,n,l,h,y,E,b);let A=T(h),S=A||T(y),D=S||T(E);return"="===l&&D&&(l=""),b=r.includePrerelease?"-0":"",A?n=">"===l||"<"===l?"<0.0.0-0":"*":l&&D?(S&&(y=0),E=0,">"===l?(l=">=",S?(h=+h+1,y=0):y=+y+1,E=0):"<="===l&&(l="<",S?h=+h+1:y=+y+1),"<"===l&&(b="-0"),n=`${l+h}.${y}.${E}${b}`):S?n=`>=${h}.0.0${b} <${+h+1}.0.0-0`:D&&(n=`>=${h}.${y}.0${b} <${h}.${+y+1}.0-0`),eM("xRange return",n),n})},cn=(t,r)=>(eM("replaceStars",t,r),t.trim().replace(eW[eH.STAR],"")),ln=(t,r)=>(eM("replaceGTE0",t,r),t.trim().replace(eW[r.includePrerelease?eH.GTE0PRE:eH.GTE0],"")),pn=t=>(r,n,l,h,y,E,b,A,S,D,U,H,q)=>`${n=T(l)?"":T(h)?`>=${l}.0.0${t?"-0":""}`:T(y)?`>=${l}.${h}.0${t?"-0":""}`:E?`>=${n}`:`>=${n}${t?"-0":""}`} ${A=T(S)?"":T(D)?`<${+S+1}.0.0-0`:T(U)?`<${S}.${+D+1}.0-0`:H?`<=${S}.${D}.${U}-${H}`:t?`<${S}.${D}.${+U+1}-0`:`<=${A}`}`.trim(),un=(t,r,n)=>{for(let n=0;n<t.length;n++)if(!t[n].test(r))return!1;if(r.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(eM(t[n].semver),t[n].semver!==eB.ANY&&t[n].semver.prerelease.length>0){let l=t[n].semver;if(l.major===r.major&&l.minor===r.minor&&l.patch===r.patch)return!0}return!1}return!0},Be=(t,r,n)=>{try{r=new ez(r,n)}catch(t){return!1}return r.test(t)},{MAX_LENGTH:eX}=eT,{re:eY,t:eJ}=eL,hn=(t,r)=>{if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),t instanceof eD)return t;if("string"!=typeof t||t.length>eX||!(r.loose?eY[eJ.LOOSE]:eY[eJ.FULL]).test(t))return null;try{return new eD(t,r)}catch(t){return null}},{re:eZ,t:eQ}=eL,He=(t,r)=>{if(t instanceof eD)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let n=null;if((r=r||{}).rtl){let r;for(;(r=eZ[eQ.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),eZ[eQ.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;eZ[eQ.COERCERTL].lastIndex=-1}else n=t.match(eZ[eQ.COERCE]);return null===n?null:hn(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,r)};function En(t){return String.fromCharCode(parseInt(t.slice(1),16))}function fn(t){return`%${`00${t.charCodeAt(0).toString(16)}`.slice(-2)}`}function ne(t){return btoa(encodeURIComponent(JSON.stringify(t)).replace(/%[0-9A-F]{2}/g,En))}function Ve(t){return JSON.parse(decodeURIComponent(Array.from(atob(t),fn).join("")))}function N(t){return void 0===t}function re(t){return null===t||N(t)}function se(t){if(!t)return!0;for(let r in t)if(Object.hasOwnProperty.call(t,r))return!1;return!0}var e0={},e1={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},e2=class extends Error{constructor(t,r){super(`Magic SDK Error: [${t}] ${r}`),this.code=t,this.rawMessage=r,this.__proto__=Error,Object.setPrototypeOf(this,e2.prototype)}},e6=class extends Error{constructor(t){super(),this.__proto__=Error;let r=Number(null==t?void 0:t.code);this.rawMessage=(null==t?void 0:t.message)||"Internal error",this.code=!re(r)&&"number"==typeof r&&Object.values(ed).includes(r)?r:ed.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(null==t?void 0:t.data)||void 0,Object.setPrototypeOf(this,e6.prototype)}},e4=class{constructor(t,r){this.code=t,this.rawMessage=r,this.message=`Magic SDK Warning: [${t}] ${r}`}log(){console.warn(this.message)}},e3=class extends Error{constructor(t,r,n,l){super(`Magic Extension Error (${t.name}): [${r}] ${n}`),this.code=r,this.rawMessage=n,this.data=l,this.__proto__=Error,Object.setPrototypeOf(this,e3.prototype)}},e5=class{constructor(t,r,n){this.code=r,this.rawMessage=n,this.message=`Magic Extension Warning (${t.name}): [${r}] ${n}`}log(){console.warn(this.message)}},e8=function*(){let t=0;for(;;)t<Number.MAX_SAFE_INTEGER?yield++t:t=0}();function xe(){return e8.next().value}var e9=Symbol("Payload pre-processed by Magic SDK");function at(t){return Object.defineProperty(t,e9,{value:!0,enumerable:!1}),t}function _(t){var r,n,l;return t[e9]||(t.jsonrpc=null!=(r=t.jsonrpc)?r:"2.0",t.id=xe(),t.method=null!=(n=t.method)?n:"noop",t.params=null!=(l=t.params)?l:[],at(t)),t}function d(t,r=[]){return at({params:r,method:t,jsonrpc:"2.0",id:xe()})}var e7=class{constructor(t){t instanceof e7?(this._jsonrpc=t.payload.jsonrpc,this._id=t.payload.id,this._result=t.payload.result,this._error=t.payload.error):re(t)||N(t.jsonrpc)||N(t.id)||N(t.result)&&N(t.error)?(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=void 0,this._error=void 0):(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=t.result,this._error=t.error)}applyError(t){return this._error=t,this}applyResult(t){return this._result=t,this}get hasError(){return void 0!==this._error&&null!==this._error}get hasResult(){return void 0!==this._result}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},te=(K=null!=(q=eO())?eg(eR(q)):{},((t,r,n,l)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let n of ew(r))eS.call(t,n)||void 0===n||e_(t,n,{get:()=>r[n],enumerable:!(l=eI(r,n))||l.enumerable});return t})(q&&q.__esModule?K:e_(K,"default",{value:q,enumerable:!0}),q)),tt=class extends te.default{};function ae(){let t=new tt;return{emitter:t,createChainingEmitterMethod:(r,n)=>(...l)=>(t[r].apply(t,l),n),createBoundEmitterMethod:r=>(...n)=>t[r].apply(t,n)}}var tr=Symbol("isPromiEvent");function dt(t){return!!t[tr]}function ce(t){let r=Ne(t),{createBoundEmitterMethod:n,createChainingEmitterMethod:l}=ae(),h=Symbol("Promise.then"),y=Symbol("Promise.catch"),E=Symbol("Promise.finally"),i=(t,r)=>(...n)=>c(r[t].apply(r,n)),c=t=>Object.assign(t,{[tr]:!0,[h]:t[h]||t.then,[y]:t[y]||t.catch,[E]:t[E]||t.finally,then:i(h,t),catch:i(y,t),finally:i(E,t),on:l("on",t),once:l("once",t),addListener:l("addListener",t),off:l("off",t),removeListener:l("removeListener",t),removeAllListeners:l("removeAllListeners",t),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),b=c(r.then(t=>(b.emit("done",t),b.emit("settled"),t),t=>{throw b.emit("error",t),b.emit("settled"),t}));return b}function Ne(t){return new Promise((r,n)=>{Promise.resolve(t(r,n)).catch(n)})}var ti=class{constructor(t){this.sdk=t}get overlay(){return this.sdk.overlay}request(t){let r=this.overlay.post(em.MAGIC_HANDLE_REQUEST,_(t)),n=ce((t,n)=>{r.then(r=>{if(l(),r.hasError)n(new e6(r.payload.error));else if(r.hasResult)t(r.payload.result);else throw new e2(el.MalformedResponse,"Response from the Magic iframe is malformed.")}).catch(t=>{l(),n(t)})}),l=this.overlay.on(ep.MAGIC_HANDLE_EVENT,r=>{var l;let{response:h}=r.data;if(h.id===t.id&&(null==(l=h.result)?void 0:l.event)){let{event:t,params:r=[]}=h.result;n.emit(t,...r)}});return n}createIntermediaryEvent(t,r){return n=>{let l=d(eh.IntermediaryEvent,[{payloadId:r,eventType:t,args:n}]);this.request(l)}}},to=class extends ti{loginWithMagicLink(t){let{email:r,showUI:n=!0,redirectURI:l}=t,h=d(this.sdk.testMode?eh.LoginWithMagicLinkTestMode:eh.LoginWithMagicLink,[{email:r,showUI:n,redirectURI:l}]);return this.request(h)}loginWithSMS(t){let{phoneNumber:r}=t,n=d(this.sdk.testMode?eh.LoginWithSmsTestMode:eh.LoginWithSms,[{phoneNumber:r,showUI:!0}]);return this.request(n)}loginWithEmailOTP(t){let{email:r,showUI:n}=t,l=d(this.sdk.testMode?eh.LoginWithEmailOTPTestMode:eh.LoginWithEmailOTP,[{email:r,showUI:n}]);if(!n){let t=this.request(l);return t&&t.on("otp-input-sent",t=>{this.createIntermediaryEvent("verify-email-otp",l.id)(t)}),t}return this.request(l)}loginWithCredential(t){let r=null!=t?t:"";if(!t&&"web"===e0.platform){r=window.location.search;let t=window.location.origin+window.location.pathname;window.history.replaceState(null,"",t)}let n=d(this.sdk.testMode?eh.LoginWithCredentialTestMode:eh.LoginWithCredential,[r]);return this.request(n)}},ta={};function C(t){return(...r)=>x(this,null,function*(){return ei||(ei=yield e0.configureStorage()),yield ei.ready(),ei[t](...r)})}((t,r)=>{for(var n in r)e_(t,n,{get:r[n],enumerable:!0})})(ta,{clear:()=>tl,getItem:()=>ts,iterate:()=>tp,key:()=>td,keys:()=>th,length:()=>tf,removeItem:()=>tu,setItem:()=>tc});var ts=C("getItem"),tc=C("setItem"),tu=C("removeItem"),tl=C("clear"),tf=C("length"),td=C("key"),th=C("keys"),tp=C("iterate"),tm="STORE_KEY_PRIVATE_KEY",tv="STORE_KEY_PUBLIC_JWK",ty="ECDSA",tg="P-256",t_={name:ty,namedCurve:tg},tE={name:ty,namedCurve:tg};function yt(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Kn(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}var tI=class extends ti{getIdToken(t){let r=d(this.sdk.testMode?eh.GetIdTokenTestMode:eh.GetIdToken,[t]);return this.request(r)}generateIdToken(t){let r=d(this.sdk.testMode?eh.GenerateIdTokenTestMode:eh.GenerateIdToken,[t]);return this.request(r)}getMetadata(){let t=d(this.sdk.testMode?eh.GetMetadataTestMode:eh.GetMetadata);return this.request(t)}updateEmail(t){let{email:r,showUI:n=!0}=t,l=d(this.sdk.testMode?eh.UpdateEmailTestMode:eh.UpdateEmail,[{email:r,showUI:n}]);return this.request(l)}isLoggedIn(){let t=d(this.sdk.testMode?eh.IsLoggedInTestMode:eh.IsLoggedIn);return this.request(t)}logout(){tu(tv),tu(tm);let t=d(this.sdk.testMode?eh.LogoutTestMode:eh.Logout);return this.request(t)}showSettings(){let t=d(this.sdk.testMode?eh.UserSettingsTestMode:eh.UserSettings);return this.request(t)}updatePhoneNumber(){let t=d(this.sdk.testMode?eh.UpdatePhoneNumberTestMode:eh.UpdatePhoneNumber);return this.request(t)}recoverAccount(t){let r=d(this.sdk.testMode?eh.RecoverAccountTestMode:eh.RecoverAccount,[t]);return this.request(r)}},tb=class extends ti{connectWithUI(){let t=d(eh.RequestAccounts);return this.request(t)}showUI(){let t=d(eh.ShowUI);return this.request(t)}getInfo(){let t=d(eh.GetInfo);return this.request(t)}requestUserInfoWithUI(t){let r=d(eh.RequestUserInfoWithUI,t?[t]:[]);return this.request(r)}disconnect(){tu(tv),tu(tm);let t=d(eh.Disconnect);return this.request(t)}},{createBoundEmitterMethod:tw,createChainingEmitterMethod:tA}=ae(),tR=class extends ti{constructor(){super(...arguments),this.isMagic=!0,this.on=tA("on",this),this.once=tA("once",this),this.addListener=tA("addListener",this),this.off=tA("off",this),this.removeListener=tA("removeListener",this),this.removeAllListeners=tA("removeAllListeners",this),this.emit=tw("emit"),this.eventNames=tw("eventNames"),this.listeners=tw("listeners"),this.listenerCount=tw("listenerCount")}sendAsync(t,r){if(!r){var n;let t,l,h;throw n={procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:null===r?"null":typeof r},new e2(el.InvalidArgument,`Invalid ${(l=(t=n.argument+1)%10,h=t%100,1===l&&11!==h?`${t}st`:2===l&&12!==h?`${t}nd`:3===l&&13!==h?`${t}rd`:`${t}th`)} argument given to \`${n.procedure}\`.
  Expected: \`${n.expected}\`
  Received: \`${n.received}\``)}if(Array.isArray(t))this.overlay.post(em.MAGIC_HANDLE_REQUEST,t.map(t=>{let r=_(t);return this.prefixPayloadMethodForTestMode(r),r})).then(t=>{r(null,t.map(t=>De(Z({},t.payload),{error:t.hasError?new e6(t.payload.error):null})))});else{let n=_(t);this.prefixPayloadMethodForTestMode(n),this.overlay.post(em.MAGIC_HANDLE_REQUEST,n).then(t=>{r(t.hasError?new e6(t.payload.error):null,t.payload)})}}send(t,r){if("string"==typeof t){let n=d(t,Array.isArray(r)?r:[]);return this.request(n)}if(Array.isArray(t)||r){this.sendAsync(t,r);return}let n=new e4(ef.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");return n.log(),new e7(t).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let t=d("eth_accounts");return this.request(t)}request(t){return this.prefixPayloadMethodForTestMode(t),super.request(t)}prefixPayloadMethodForTestMode(t){this.sdk.testMode&&(t.method=`testMode/eth/${t.method}`)}};function Ae(t,r){return r?new URL(t,r):new URL(t)}var tS=["request","overlay","sdk"],tN=class extends ti{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:ce,isPromiEvent:dt,encodeJSON:ne,decodeJSON:Ve,createJsonRpcRequestPayload:d,standardizeJsonRpcRequestPayload:_,storage:ta};let t=[this,...function(t){let r=Object.getPrototypeOf(t),n=[r];for(;r!==ti.prototype;)n.push(r=Object.getPrototypeOf(r));return n}(this)];tS.forEach(r=>{let n=t.map(t=>Object.getOwnPropertyDescriptor(t,r)),l=n.findIndex(t=>!!t),h=n[l];h&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:h,isPrototypeField:l>0}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw new e2(el.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${r}\` can be accessed. Do not invoke \`Extension.${r}\` inside an extension constructor.`)}}))})}init(t){this.__is_initialized__||(tS.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:n}=this.__sdk_access_field_descriptors__.get(t);n?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=t,this.__is_initialized__=!0)}createDeprecationWarning(t){let{method:r,removalVersion:n,useInstead:l}=t,h=l?` Use \`${l}\` instead.`:"",y=`\`${r}\` will be removed from this Extension in version \`${n}\`.${h}`;return new e5(this,"DEPRECATION_NOTICE",y)}createWarning(t,r){return new e5(this,t,r)}createError(t,r,n){return new e3(this,t,r,n)}},tO=class extends tN{},tT=class extends tN{};tT.Internal=tO,tT.Anonymous="anonymous extension";var tM=class extends ti{purchase(t){let r=d(eh.NFTPurchase,[t]);return this.request(r)}};function Tt(t){return!t.compat||null==t.compat[e0.sdkName]||("string"==typeof t.compat[e0.sdkName]?Be(He(e0.version),t.compat[e0.sdkName]):!!t.compat[e0.sdkName])}function Bn(t){var r;let n=null!=(r=null==t?void 0:t.extensions)?r:[],l={},h=[];if(Array.isArray(n)?n.forEach(t=>{Tt(t)?(t.init(this),(t.name||t.name!==tT.Anonymous)&&(this[t.name]=t),t instanceof tT.Internal&&(se(t.config)||(l[t.name]=t.config))):h.push(t)}):Object.keys(n).forEach(t=>{if(Tt(n[t])){n[t].init(this);let r=n[t];this[t]=r,r instanceof tT.Internal&&(se(r.config)||(l[n[t].name]=r.config))}else h.push(n[t])}),h.length){let t;throw t=`Some extensions are incompatible with \`${e0.sdkName}@${e0.version}\`:`,h.filter(t=>void 0!==t.compat&&null!==t.compat).forEach(r=>{let n=r.compat[e0.sdkName];"string"==typeof n?t+=`
  - Extension \`${r.name}\` supports version(s) \`${n}\``:n||(t+=`
  - Extension \`${r.name}\` does not support ${e0.platform} environments.`)}),new e2(el.IncompatibleExtensions,t)}return l}var tL=class{constructor(t,r){var n;if(this.apiKey=t,!t)throw new e2(el.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.");"react-native"===e0.platform&&(null==r?void 0:r.endpoint)&&new e4(ef.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${e0.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`).log();let{defaultEndpoint:l,version:h}=e0;this.testMode=!!(null!=r&&r.testMode),this.endpoint=Ae(null!=(n=null==r?void 0:r.endpoint)?n:l).origin,this.auth=new to(this),this.user=new tI(this),this.wallet=new tb(this),this.nft=new tM(this),this.rpcProvider=new tR(this);let y=Bn.call(this,r);this.parameters=ne(Z({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:null==r?void 0:r.network,host:Ae(this.endpoint).host,sdk:e1[e0.sdkName],version:h,ext:se(y)?void 0:y,locale:(null==r?void 0:r.locale)||"en_US"},e0.bundleId?{bundleId:e0.bundleId}:{}))}get overlay(){if(!tL.__overlays__.has(this.parameters)){let t=new e0.ViewController(this.endpoint,this.parameters);t.init(),tL.__overlays__.set(this.parameters,t)}return tL.__overlays__.get(this.parameters)}preload(){return x(this,null,function*(){yield this.overlay.ready})}};tL.__overlays__=new Map;var t$=class{constructor(t,r){this.endpoint=t,this.parameters=r,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(t,r){return x(this,null,function*(){return Ne(n=>x(this,null,function*(){var l;yield this.ready;let h=[],y=Array.isArray(r)?r.map(t=>t.id):[],E=yield function(t,r){return x(this,null,function*(){let n=yield ts("rt"),l;if("web"===e0.platform)try{l=yield function(){return x(this,null,function*(){var t,r,n,l;let h,y,E=yield function(){return x(this,null,function*(){let t,r;if(r=(t="undefined"!=typeof window&&!!window.crypto)&&!!window.crypto.subtle,!t||!r){console.info("webcrypto is not supported");return}return(yield ts(tv))||(yield function(){return x(this,null,function*(){let t=null,{subtle:r}=window.crypto,n=yield r.generateKey(t_,!0,["sign"]),l=yield r.exportKey("jwk",n.privateKey);t=yield r.exportKey("jwk",n.publicKey);let h=yield r.importKey("jwk",l,tE,!1,["sign"]);yield tc(tm,h),yield tc(tv,t)})}()),ts(tv)})}();if(!E){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:b}=window.crypto,A=yield ts(tm);if(!A||!b){console.info("unable to find private key or webcrypto unsupported");return}let S={iat:Math.floor(new Date().getTime()/1e3),jti:((y=window.crypto.getRandomValues(new Uint8Array(16)))[6]=15&y[6]|64,y[8]=191&y[8]|128,y[0].toString(16)+y[1].toString(16)+y[2].toString(16)+y[3].toString(16)+"-"+y[4].toString(16)+y[5].toString(16)+"-"+y[6].toString(16)+y[7].toString(16)+"-"+y[8].toString(16)+y[9].toString(16)+"-"+y[10].toString(16)+y[11].toString(16)+y[12].toString(16)+y[13].toString(16)+y[14].toString(16)+y[15].toString(16))},D={protected:(t=JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:E}),yt(Kn(t))),claims:(r=JSON.stringify(S),yt(Kn(r)))},U=(n=`${D.protected}.${D.claims}`,new TextEncoder().encode(n)),H=(l=new Uint8Array((yield b.sign({name:ty,hash:{name:"SHA-256"}},A,U))),h="",l.forEach(t=>{h+=String.fromCharCode(t)}),yt(h));return`${D.protected}.${D.claims}.${H}`})}()}catch(t){console.error("webcrypto error",t)}return l?n?{msgType:t,payload:r,jwt:l,rt:n}:{msgType:t,payload:r,jwt:l}:{msgType:t,payload:r}})}(`${t}-${this.parameters}`,r);yield this._post(E);let b=this.on(ep.MAGIC_HANDLE_RESPONSE,(l=()=>b(),t=>{var E;let b,A;let{id:S,response:D}=(A=(b=null==(E=t.data.response)?void 0:E.id)&&Array.isArray(r)?r.find(t=>t.id===b):r,b&&A?{id:b,response:new e7(A).applyResult(t.data.response.result).applyError(t.data.response.error)}:{});(function(t){x(this,null,function*(){t.data.rt&&(yield tc("rt",t.data.rt))})})(t),S&&D&&Array.isArray(r)&&y.includes(S)?(h.push(D),h.length===r.length&&(l(),n(h))):S&&D&&!Array.isArray(r)&&S===r.id&&(l(),n(D))}))}))})}on(t,r){let n=r.bind(window),o=r=>{r.data.msgType===`${t}-${this.parameters}`&&n(r)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(t=>{this.on(ep.MAGIC_OVERLAY_READY,()=>t())})}listen(){this.on(ep.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(ep.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},tC=Object.create,tP=Object.defineProperty,tx=Object.getOwnPropertyDescriptor,tj=Object.getOwnPropertyNames,tk=Object.getPrototypeOf,tD=Object.prototype.hasOwnProperty,tU=(ee=function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')},"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(ee,{get:(t,r)=>("undefined"!=typeof require?require:t)[r]}):ee),es_$e=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),es_tt=(t,r,n,l)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let h of tj(r))tD.call(t,h)||h===n||tP(t,h,{get:()=>r[h],enumerable:!(l=tx(r,h))||l.enumerable});return t},es_Ze=(t,r,n)=>(n=null!=t?tC(tk(t)):{},es_tt(!r&&t&&t.__esModule?n:tP(n,"default",{value:t,enumerable:!0}),t)),es_se=(t,r,n)=>new Promise((l,h)=>{var X=t=>{try{Y(n.next(t))}catch(t){h(t)}},P=t=>{try{Y(n.throw(t))}catch(t){h(t)}},Y=t=>t.done?l(t.value):Promise.resolve(t.value).then(X,P);Y((n=n.apply(t,r)).next())}),tB=es_$e((t,r)=>{!function(n){"object"==typeof t&&"u">typeof r?r.exports=n():"function"==typeof define&&define.amd?define([],n):("u">typeof window?window:"u">typeof global?global:"u">typeof self?self:this).localforage=n()}(function(){return(function L(t,r,n){function Y(h,y){if(!r[h]){if(!t[h]){var E="function"==typeof tU&&tU;if(!y&&E)return E(h,!0);if(l)return l(h,!0);var b=Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var A=r[h]={exports:{}};t[h][0].call(A.exports,function(r){return Y(t[h][1][r]||r)},A,A.exports,L,t,r,n)}return r[h].exports}for(var l="function"==typeof tU&&tU,h=0;h<n.length;h++)Y(n[h]);return Y})({1:[function(t,r,n){(function(t){var n,l=t.MutationObserver||t.WebKitMutationObserver;if(l){var h=0,y=new l(z),E=t.document.createTextNode("");y.observe(E,{characterData:!0}),n=function(){E.data=h=++h%2}}else if(!t.setImmediate&&"u">typeof t.MessageChannel){var b=new t.MessageChannel;b.port1.onmessage=z,n=function(){b.port2.postMessage(0)}}else n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var r=t.document.createElement("script");r.onreadystatechange=function(){z(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},t.document.documentElement.appendChild(r)}:function(){setTimeout(z,0)};var A,S=[];function z(){A=!0;for(var t,r,n=S.length;n;){for(r=S,S=[],t=-1;++t<n;)r[t]();n=S.length}A=!1}r.exports=function(t){1!==S.push(t)||A||n()}}).call(this,"u">typeof global?global:"u">typeof self?self:"u">typeof window?window:{})},{}],2:[function(t,r,n){var l=t(1);function Y(){}var h={},y=["REJECTED"],E=["FULFILLED"],b=["PENDING"];function m(t){if("function"!=typeof t)throw TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,t!==Y&&Z(this,t)}function _(t,r,n){this.promise=t,"function"==typeof r&&(this.onFulfilled=r,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function B(t,r,n){l(function(){var l;try{l=r(n)}catch(r){return h.reject(t,r)}l===t?h.reject(t,TypeError("Cannot resolve promise with itself")):h.resolve(t,l)})}function z(t){var r=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof r)return function(){r.apply(t,arguments)}}function Z(t,r){var n=!1;function O(r){n||(n=!0,h.reject(t,r))}function V(r){n||(n=!0,h.resolve(t,r))}var l=F(function(){r(V,O)});"error"===l.status&&O(l.value)}function F(t,r){var n={};try{n.value=t(r),n.status="success"}catch(t){n.status="error",n.value=t}return n}r.exports=m,m.prototype.catch=function(t){return this.then(null,t)},m.prototype.then=function(t,r){if("function"!=typeof t&&this.state===E||"function"!=typeof r&&this.state===y)return this;var n=new this.constructor(Y);return this.state!==b?B(n,this.state===E?t:r,this.outcome):this.queue.push(new _(n,t,r)),n},_.prototype.callFulfilled=function(t){h.resolve(this.promise,t)},_.prototype.otherCallFulfilled=function(t){B(this.promise,this.onFulfilled,t)},_.prototype.callRejected=function(t){h.reject(this.promise,t)},_.prototype.otherCallRejected=function(t){B(this.promise,this.onRejected,t)},h.resolve=function(t,r){var n=F(z,r);if("error"===n.status)return h.reject(t,n.value);var l=n.value;if(l)Z(t,l);else{t.state=E,t.outcome=r;for(var y=-1,b=t.queue.length;++y<b;)t.queue[y].callFulfilled(r)}return t},h.reject=function(t,r){t.state=y,t.outcome=r;for(var n=-1,l=t.queue.length;++n<l;)t.queue[n].callRejected(r);return t},m.resolve=function(t){return t instanceof this?t:h.resolve(new this(Y),t)},m.reject=function(t){var r=new this(Y);return h.reject(r,t)},m.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var n=t.length,l=!1;if(!n)return this.resolve([]);for(var y=Array(n),E=0,b=-1,A=new this(Y);++b<n;)!function(t,b){r.resolve(t).then(function(t){y[b]=t,++E!==n||l||(l=!0,h.resolve(A,y))},function(t){l||(l=!0,h.reject(A,t))})}(t[b],b);return A},m.race=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(TypeError("must be an array"));var n=t.length,l=!1;if(!n)return this.resolve([]);for(var y=-1,E=new this(Y);++y<n;)!function(t){r.resolve(t).then(function(t){l||(l=!0,h.resolve(E,t))},function(t){l||(l=!0,h.reject(E,t))})}(t[y]);return E}},{1:1}],3:[function(t,r,n){(function(r){"function"!=typeof r.Promise&&(r.Promise=t(2))}).call(this,"u">typeof global?global:"u">typeof self?self:"u">typeof window?window:{})},{2:2}],4:[function(t,r,n){var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){try{if("u">typeof indexedDB)return indexedDB;if("u">typeof webkitIndexedDB)return webkitIndexedDB;if("u">typeof mozIndexedDB)return mozIndexedDB;if("u">typeof OIndexedDB)return OIndexedDB;if("u">typeof msIndexedDB)return msIndexedDB}catch{return}}();function $(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(y){if("TypeError"!==y.name)throw y;for(var n="u">typeof BlobBuilder?BlobBuilder:"u">typeof MSBlobBuilder?MSBlobBuilder:"u">typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,l=new n,h=0;h<t.length;h+=1)l.append(t[h]);return l.getBlob(r.type)}}typeof Promise>"u"&&t(3);var y=Promise;function _(t,r){r&&t.then(function(t){r(null,t)},function(t){r(t)})}function B(t,r,n){"function"==typeof r&&t.then(r),"function"==typeof n&&t.catch(n)}function z(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function Z(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var E="local-forage-detect-blob-support",b=void 0,A={},S=Object.prototype.toString,D="readonly",U="readwrite";function V(t){var r=A[t.name],n={};n.promise=new y(function(t,r){n.resolve=t,n.reject=r}),r.deferredOperations.push(n),r.dbReady?r.dbReady=r.dbReady.then(function(){return n.promise}):r.dbReady=n.promise}function j(t){var r=A[t.name].deferredOperations.pop();if(r)return r.resolve(),r.promise}function Q(t,r){var n=A[t.name].deferredOperations.pop();if(n)return n.reject(r),n.promise}function J(t,r){return new y(function(n,l){if(A[t.name]=A[t.name]||G(),t.db){if(!r)return n(t.db);V(t),t.db.close()}var y=[t.name];r&&y.push(t.version);var b=h.open.apply(h,y);r&&(b.onupgradeneeded=function(r){var n=b.result;try{n.createObjectStore(t.storeName),r.oldVersion<=1&&n.createObjectStore(E)}catch(n){if("ConstraintError"===n.name)console.warn('The database "'+t.name+'" has been upgraded from version '+r.oldVersion+" to version "+r.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw n}}),b.onerror=function(t){t.preventDefault(),l(b.error)},b.onsuccess=function(){var r=b.result;r.onversionchange=function(t){t.target.close()},n(r),j(t)}})}function a(t,r){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),l=t.version<t.db.version,h=t.version>t.db.version;if(l&&(t.version!==r&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),h||n){if(n){var y=t.db.version+1;y>t.version&&(t.version=y)}return!0}return!1}function v(t){return $([function(t){for(var r=t.length,n=new ArrayBuffer(r),l=new Uint8Array(n),h=0;h<r;h++)l[h]=t.charCodeAt(h);return n}(atob(t.data))],{type:t.type})}function p(t){return t&&t.__local_forage_encoded_blob}function g(t){var r=this,n=r._initReady().then(function(){var t=A[r._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return B(n,t,t),n}function T(t,r,n,l){void 0===l&&(l=1);try{var h=t.db.transaction(t.storeName,r);n(null,h)}catch(h){if(l>0&&(!t.db||"InvalidStateError"===h.name||"NotFoundError"===h.name))return y.resolve().then(function(){if(!t.db||"NotFoundError"===h.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),J(t,!0)}).then(function(){return(function(t){V(t);for(var r=A[t.name],n=r.forages,l=0;l<n.length;l++){var h=n[l];h._dbInfo.db&&(h._dbInfo.db.close(),h._dbInfo.db=null)}return t.db=null,J(t,!1).then(function(r){return t.db=r,a(t)?J(t,!0):r}).then(function(l){t.db=r.db=l;for(var h=0;h<n.length;h++)n[h]._dbInfo.db=l}).catch(function(r){throw Q(t,r),r})})(t).then(function(){T(t,r,n,l-1)})}).catch(n);n(h)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var H={_driver:"asyncStorage",_initStorage:function(t){var r=this,n={db:null};if(t)for(var l in t)n[l]=t[l];var h=A[n.name];h||(h=G(),A[n.name]=h),h.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=g);var E=[];function f(){return y.resolve()}for(var b=0;b<h.forages.length;b++){var S=h.forages[b];S!==r&&E.push(S._initReady().catch(f))}var D=h.forages.slice(0);return y.all(E).then(function(){return n.db=h.db,J(n,!1)}).then(function(t){return n.db=t,a(n,r._defaultConfig.version)?J(n,!0):t}).then(function(t){n.db=h.db=t,r._dbInfo=n;for(var l=0;l<D.length;l++){var y=D[l];y!==r&&(y._dbInfo.db=n.db,y._dbInfo.version=n.version)}})},_support:function(){try{if(!h||!h.open)return!1;var t="u">typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||r)&&"u">typeof indexedDB&&"u">typeof IDBKeyRange}catch{return!1}}(),iterate:function(t,r){var n=this,l=new y(function(r,l){n.ready().then(function(){T(n._dbInfo,D,function(h,y){if(h)return l(h);try{var E=y.objectStore(n._dbInfo.storeName).openCursor(),b=1;E.onsuccess=function(){var n=E.result;if(n){var l=n.value;p(l)&&(l=v(l));var h=t(l,n.key,b++);void 0!==h?r(h):n.continue()}else r()},E.onerror=function(){l(E.error)}}catch(t){l(t)}})}).catch(l)});return _(l,r),l},getItem:function(t,r){var n=this;t=z(t);var l=new y(function(r,l){n.ready().then(function(){T(n._dbInfo,D,function(h,y){if(h)return l(h);try{var E=y.objectStore(n._dbInfo.storeName).get(t);E.onsuccess=function(){var t=E.result;void 0===t&&(t=null),p(t)&&(t=v(t)),r(t)},E.onerror=function(){l(E.error)}}catch(t){l(t)}})}).catch(l)});return _(l,r),l},setItem:function(t,r,n){var l=this;t=z(t);var h=new y(function(n,h){var A;l.ready().then(function(){var t;return A=l._dbInfo,"[object Blob]"===S.call(r)?(t=A.db,"boolean"==typeof b?y.resolve(b):new y(function(r){var n=t.transaction(E,U),l=$([""]);n.objectStore(E).put(l,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),r(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/);r(navigator.userAgent.match(/Edge\//)||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1}).then(function(t){return b=t})).then(function(t){return t?r:new y(function(t,n){var l=new FileReader;l.onerror=n,l.onloadend=function(n){t({__local_forage_encoded_blob:!0,data:btoa(n.target.result||""),type:r.type})},l.readAsBinaryString(r)})}):r}).then(function(r){T(l._dbInfo,U,function(y,E){if(y)return h(y);try{var b=E.objectStore(l._dbInfo.storeName);null===r&&(r=void 0);var A=b.put(r,t);E.oncomplete=function(){void 0===r&&(r=null),n(r)},E.onabort=E.onerror=function(){var t=A.error?A.error:A.transaction.error;h(t)}}catch(t){h(t)}})}).catch(h)});return _(h,n),h},removeItem:function(t,r){var n=this;t=z(t);var l=new y(function(r,l){n.ready().then(function(){T(n._dbInfo,U,function(h,y){if(h)return l(h);try{var E=y.objectStore(n._dbInfo.storeName).delete(t);y.oncomplete=function(){r()},y.onerror=function(){l(E.error)},y.onabort=function(){var t=E.error?E.error:E.transaction.error;l(t)}}catch(t){l(t)}})}).catch(l)});return _(l,r),l},clear:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){T(r._dbInfo,U,function(l,h){if(l)return n(l);try{var y=h.objectStore(r._dbInfo.storeName).clear();h.oncomplete=function(){t()},h.onabort=h.onerror=function(){var t=y.error?y.error:y.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return _(n,t),n},length:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){T(r._dbInfo,D,function(l,h){if(l)return n(l);try{var y=h.objectStore(r._dbInfo.storeName).count();y.onsuccess=function(){t(y.result)},y.onerror=function(){n(y.error)}}catch(t){n(t)}})}).catch(n)});return _(n,t),n},key:function(t,r){var n=this,l=new y(function(r,l){if(t<0){r(null);return}n.ready().then(function(){T(n._dbInfo,D,function(h,y){if(h)return l(h);try{var E=y.objectStore(n._dbInfo.storeName),b=!1,A=E.openKeyCursor();A.onsuccess=function(){var n=A.result;if(!n){r(null);return}0===t||b?r(n.key):(b=!0,n.advance(t))},A.onerror=function(){l(A.error)}}catch(t){l(t)}})}).catch(l)});return _(l,r),l},keys:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){T(r._dbInfo,D,function(l,h){if(l)return n(l);try{var y=h.objectStore(r._dbInfo.storeName).openKeyCursor(),E=[];y.onsuccess=function(){var r=y.result;if(!r){t(E);return}E.push(r.key),r.continue()},y.onerror=function(){n(y.error)}}catch(t){n(t)}})}).catch(n)});return _(n,t),n},dropInstance:function(t,r){r=Z.apply(this,arguments);var n,l=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||l.name,t.storeName=t.storeName||l.storeName),t.name){var E=t.name===l.name&&this._dbInfo.db?y.resolve(this._dbInfo.db):J(t,!1).then(function(r){var n=A[t.name],l=n.forages;n.db=r;for(var h=0;h<l.length;h++)l[h]._dbInfo.db=r;return r});n=t.storeName?E.then(function(r){if(r.objectStoreNames.contains(t.storeName)){var n=r.version+1;V(t);var l=A[t.name],E=l.forages;r.close();for(var b=0;b<E.length;b++){var S=E[b];S._dbInfo.db=null,S._dbInfo.version=n}return new y(function(r,l){var y=h.open(t.name,n);y.onerror=function(t){y.result.close(),l(t)},y.onupgradeneeded=function(){y.result.deleteObjectStore(t.storeName)},y.onsuccess=function(){var t=y.result;t.close(),r(t)}}).then(function(t){l.db=t;for(var r=0;r<E.length;r++){var n=E[r];n._dbInfo.db=t,j(n._dbInfo)}}).catch(function(r){throw(Q(t,r)||y.resolve()).catch(function(){}),r})}}):E.then(function(r){V(t);var n=A[t.name],l=n.forages;r.close();for(var E=0;E<l.length;E++)l[E]._dbInfo.db=null;return new y(function(r,n){var l=h.deleteDatabase(t.name);l.onerror=function(){var t=l.result;t&&t.close(),n(l.error)},l.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},l.onsuccess=function(){var t=l.result;t&&t.close(),r(t)}}).then(function(t){n.db=t;for(var r=0;r<l.length;r++)j(l[r]._dbInfo)}).catch(function(r){throw(Q(t,r)||y.resolve()).catch(function(){}),r})})}else n=y.reject("Invalid arguments");return _(n,r),n}},q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=/^~~local_forage_type~([^~]+)~/,ee="__lfsc__:",et=ee.length,er="arbf",ei="blob",eo="si08",ea="ui08",es="uic8",ec="si16",eu="si32",el="ur16",ef="ui32",ed="fl32",eh="fl64",ep=et+er.length,em=Object.prototype.toString;function Ke(t){var r,n,l,h,y,E=.75*t.length,b=t.length,A=0;"="===t[t.length-1]&&(E--,"="===t[t.length-2]&&E--);var S=new ArrayBuffer(E),D=new Uint8Array(S);for(r=0;r<b;r+=4)n=q.indexOf(t[r]),l=q.indexOf(t[r+1]),h=q.indexOf(t[r+2]),y=q.indexOf(t[r+3]),D[A++]=n<<2|l>>4,D[A++]=(15&l)<<4|h>>2,D[A++]=(3&h)<<6|63&y;return S}function Ee(t){var r,n=new Uint8Array(t),l="";for(r=0;r<n.length;r+=3)l+=q[n[r]>>2]+q[(3&n[r])<<4|n[r+1]>>4]+q[(15&n[r+1])<<2|n[r+2]>>6]+q[63&n[r+2]];return n.length%3==2?l=l.substring(0,l.length-1)+"=":n.length%3==1&&(l=l.substring(0,l.length-2)+"=="),l}var ev={serialize:function(t,r){var n="";if(t&&(n=em.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===em.call(t.buffer))){var l,h=ee;t instanceof ArrayBuffer?(l=t,h+=er):(l=t.buffer,"[object Int8Array]"===n?h+=eo:"[object Uint8Array]"===n?h+=ea:"[object Uint8ClampedArray]"===n?h+=es:"[object Int16Array]"===n?h+=ec:"[object Uint16Array]"===n?h+=el:"[object Int32Array]"===n?h+=eu:"[object Uint32Array]"===n?h+=ef:"[object Float32Array]"===n?h+=ed:"[object Float64Array]"===n?h+=eh:r(Error("Failed to get type for BinaryArray"))),r(h+Ee(l))}else if("[object Blob]"===n){var y=new FileReader;y.onload=function(){r(ee+ei+("~~local_forage_type~"+t.type)+"~"+Ee(this.result))},y.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),r(null,n)}},deserialize:function(t){if(t.substring(0,et)!==ee)return JSON.parse(t);var r,n=t.substring(ep),l=t.substring(et,ep);if(l===ei&&K.test(n)){var h=n.match(K);r=h[1],n=n.substring(h[0].length)}var y=Ke(n);switch(l){case er:return y;case ei:return $([y],{type:r});case eo:return new Int8Array(y);case ea:return new Uint8Array(y);case es:return new Uint8ClampedArray(y);case ec:return new Int16Array(y);case el:return new Uint16Array(y);case eu:return new Int32Array(y);case ef:return new Uint32Array(y);case ed:return new Float32Array(y);case eh:return new Float64Array(y);default:throw Error("Unkown type: "+l)}},stringToBuffer:Ke,bufferToString:Ee};function He(t,r,n,l){t.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,l)}function ne(t,r,n,l,h,y){t.executeSql(n,l,h,function(t,E){E.code===E.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(t,b){b.rows.length?y(t,E):He(t,r,function(){t.executeSql(n,l,h,y)},y)},y):y(t,E)},y)}function Ve(t,r,n,l){var h=this;t=z(t);var E=new y(function(y,E){h.ready().then(function(){void 0===r&&(r=null);var b=r,A=h._dbInfo;A.serializer.serialize(r,function(r,S){S?E(S):A.db.transaction(function(n){ne(n,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[t,r],function(){y(b)},function(t,r){E(r)})},function(r){if(r.code===r.QUOTA_ERR){if(l>0){y(Ve.apply(h,[t,b,n,l-1]));return}E(r)}})})}).catch(E)});return _(E,n),E}var ey={_driver:"webSQLStorage",_initStorage:function(t){var r=this,n={db:null};if(t)for(var l in t)n[l]="string"!=typeof t[l]?t[l].toString():t[l];var h=new y(function(t,l){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return l(t)}n.db.transaction(function(h){He(h,n,function(){r._dbInfo=n,t()},function(t,r){l(r)})},l)});return n.serializer=ev,h},_support:"function"==typeof openDatabase,iterate:function(t,r){var n=this,l=new y(function(r,l){n.ready().then(function(){var h=n._dbInfo;h.db.transaction(function(n){ne(n,h,"SELECT * FROM "+h.storeName,[],function(n,l){for(var y=l.rows,E=y.length,b=0;b<E;b++){var A=y.item(b),S=A.value;if(S&&(S=h.serializer.deserialize(S)),void 0!==(S=t(S,A.key,b+1))){r(S);return}}r()},function(t,r){l(r)})})}).catch(l)});return _(l,r),l},getItem:function(t,r){var n=this;t=z(t);var l=new y(function(r,l){n.ready().then(function(){var h=n._dbInfo;h.db.transaction(function(n){ne(n,h,"SELECT * FROM "+h.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var l=n.rows.length?n.rows.item(0).value:null;l&&(l=h.serializer.deserialize(l)),r(l)},function(t,r){l(r)})})}).catch(l)});return _(l,r),l},setItem:function(t,r,n){return Ve.apply(this,[t,r,n,1])},removeItem:function(t,r){var n=this;t=z(t);var l=new y(function(r,l){n.ready().then(function(){var h=n._dbInfo;h.db.transaction(function(n){ne(n,h,"DELETE FROM "+h.storeName+" WHERE key = ?",[t],function(){r()},function(t,r){l(r)})})}).catch(l)});return _(l,r),l},clear:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(r){ne(r,l,"DELETE FROM "+l.storeName,[],function(){t()},function(t,r){n(r)})})}).catch(n)});return _(n,t),n},length:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(r){ne(r,l,"SELECT COUNT(key) as c FROM "+l.storeName,[],function(r,n){t(n.rows.item(0).c)},function(t,r){n(r)})})}).catch(n)});return _(n,t),n},key:function(t,r){var n=this,l=new y(function(r,l){n.ready().then(function(){var h=n._dbInfo;h.db.transaction(function(n){ne(n,h,"SELECT key FROM "+h.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){r(n.rows.length?n.rows.item(0).key:null)},function(t,r){l(r)})})}).catch(l)});return _(l,r),l},keys:function(t){var r=this,n=new y(function(t,n){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(r){ne(r,l,"SELECT key FROM "+l.storeName,[],function(r,n){for(var l=[],h=0;h<n.rows.length;h++)l.push(n.rows.item(h).key);t(l)},function(t,r){n(r)})})}).catch(n)});return _(n,t),n},dropInstance:function(t,r){r=Z.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var l,h=this;return _(l=t.name?new y(function(r){var l;l=t.name===n.name?h._dbInfo.db:openDatabase(t.name,"","",0),r(t.storeName?{db:l,storeNames:[t.storeName]}:new y(function(t,r){l.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(r,n){for(var h=[],y=0;y<n.rows.length;y++)h.push(n.rows.item(y).name);t({db:l,storeNames:h})},function(t,n){r(n)})},function(t){r(t)})}))}).then(function(t){return new y(function(r,n){t.db.transaction(function(l){for(var h=[],E=0,b=t.storeNames.length;E<b;E++)h.push(function(t){return new y(function(r,n){l.executeSql("DROP TABLE IF EXISTS "+t,[],function(){r()},function(t,r){n(r)})})}(t.storeNames[E]));y.all(h).then(function(){r()}).catch(function(t){n(t)})},function(t){n(t)})})}):y.reject("Invalid arguments"),r),l}};function Ge(t,r){var n=t.name+"/";return t.storeName!==r.storeName&&(n+=t.storeName+"/"),n}var Kr=function(t,r){for(var n,l=t.length,h=0;h<l;){if((n=t[h])===r||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;h++}return!1},eg=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},e_={},eE={},eI={INDEXEDDB:H,WEBSQL:ey,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(t){var r={};if(t)for(var n in t)r[n]=t[n];return r.keyPrefix=Ge(t,this._defaultConfig),!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch{return!0}}()||localStorage.length>0?(this._dbInfo=r,r.serializer=ev,y.resolve()):y.reject()},_support:function(){try{return"u">typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(t,r){var n=this,l=n.ready().then(function(){for(var r=n._dbInfo,l=r.keyPrefix,h=l.length,y=localStorage.length,E=1,b=0;b<y;b++){var A=localStorage.key(b);if(0===A.indexOf(l)){var S=localStorage.getItem(A);if(S&&(S=r.serializer.deserialize(S)),void 0!==(S=t(S,A.substring(h),E++)))return S}}});return _(l,r),l},getItem:function(t,r){var n=this;t=z(t);var l=n.ready().then(function(){var r=n._dbInfo,l=localStorage.getItem(r.keyPrefix+t);return l&&(l=r.serializer.deserialize(l)),l});return _(l,r),l},setItem:function(t,r,n){var l=this;t=z(t);var h=l.ready().then(function(){void 0===r&&(r=null);var n=r;return new y(function(h,y){var E=l._dbInfo;E.serializer.serialize(r,function(r,l){if(l)y(l);else try{localStorage.setItem(E.keyPrefix+t,r),h(n)}catch(t){("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&y(t),y(t)}})})});return _(h,n),h},removeItem:function(t,r){var n=this;t=z(t);var l=n.ready().then(function(){var r=n._dbInfo;localStorage.removeItem(r.keyPrefix+t)});return _(l,r),l},clear:function(t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var l=localStorage.key(n);0===l.indexOf(t)&&localStorage.removeItem(l)}});return _(n,t),n},length:function(t){var r=this.keys().then(function(t){return t.length});return _(r,t),r},key:function(t,r){var n=this,l=n.ready().then(function(){var r,l=n._dbInfo;try{r=localStorage.key(t)}catch{r=null}return r&&(r=r.substring(l.keyPrefix.length)),r});return _(l,r),l},keys:function(t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=localStorage.length,l=[],h=0;h<n;h++){var y=localStorage.key(h);0===y.indexOf(t.keyPrefix)&&l.push(y.substring(t.keyPrefix.length))}return l});return _(n,t),n},dropInstance:function(t,r){if(r=Z.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var l,h=this;return _(l=t.name?new y(function(r){r(t.storeName?Ge(t,h._defaultConfig):t.name+"/")}).then(function(t){for(var r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}):y.reject("Invalid arguments"),r),l}}},eb=[eI.INDEXEDDB._driver,eI.WEBSQL._driver,eI.LOCALSTORAGE._driver],ew=["dropInstance"],eA=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ew),eR={description:"",driver:eb.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ae(){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)r.hasOwnProperty(n)&&(eg(r[n])?arguments[0][n]=r[n].slice():arguments[0][n]=r[n])}return arguments[0]}var eS=new(function(){function e(t){for(var r in!function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,e),eI)if(eI.hasOwnProperty(r)){var n=eI[r],l=n._driver;this[r]=l,e_[l]||this.defineDriver(n)}this._defaultConfig=Ae({},eR),this._config=Ae({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":l(t))!=="object")return"string"==typeof t?this._config[t]:this._config;if(this._ready)return Error("Can't call config() after localforage has been used.");for(var r in t){if("storeName"===r&&(t[r]=t[r].replace(/\W/g,"_")),"version"===r&&"number"!=typeof t[r])return Error("Database version must be a number.");this._config[r]=t[r]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)},e.prototype.defineDriver=function(t,r,n){var l=new y(function(r,n){try{var l=t._driver,h=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){n(h);return}for(var E=eA.concat("_initStorage"),b=0,A=E.length;b<A;b++){var S=E[b];if((!Kr(ew,S)||t[S])&&"function"!=typeof t[S]){n(h);return}}(function(){for(var de=function(t){return function(){var r=Error("Method "+t+" is not implemented by the current driver"),n=y.reject(r);return _(n,arguments[arguments.length-1]),n}},r=0,n=ew.length;r<n;r++){var l=ew[r];t[l]||(t[l]=de(l))}})();var W=function(n){e_[l]&&console.info("Redefining LocalForage driver: "+l),e_[l]=t,eE[l]=n,r()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(W,n):W(!!t._support):W(!0)}catch(t){n(t)}});return B(l,r,n),l},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,r,n){var l=e_[t]?y.resolve(e_[t]):y.reject(Error("Driver not found."));return B(l,r,n),l},e.prototype.getSerializer=function(t){var r=y.resolve(ev);return B(r,t),r},e.prototype.ready=function(t){var r=this,n=r._driverSet.then(function(){return null===r._ready&&(r._ready=r._initDriver()),r._ready});return B(n,t,t),n},e.prototype.setDriver=function(t,r,n){var l=this;eg(t)||(t=[t]);var h=this._getSupportedDrivers(t);function u(){l._config.driver=l.driver()}function c(t){return l._extend(t),u(),l._ready=l._initStorage(l._config),l._ready}var E=null!==this._driverSet?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=E.then(function(){var t=h[0];return l._dbInfo=null,l._ready=null,l.getDriver(t).then(function(t){l._driver=t._driver,u(),l._wrapLibraryMethodsWithReady(),l._initDriver=function(){var t=0;return function x(){for(;t<h.length;){var r=h[t];return t++,l._dbInfo=null,l._ready=null,l.getDriver(r).then(c).catch(x)}u();var n=Error("No available storage method found.");return l._driverSet=y.reject(n),l._driverSet}()}})}).catch(function(){u();var t=Error("No available storage method found.");return l._driverSet=y.reject(t),l._driverSet}),B(this._driverSet,r,n),this._driverSet},e.prototype.supports=function(t){return!!eE[t]},e.prototype._extend=function(t){Ae(this,t)},e.prototype._getSupportedDrivers=function(t){for(var r=[],n=0,l=t.length;n<l;n++){var h=t[n];this.supports(h)&&r.push(h)}return r},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,r=eA.length;t<r;t++)(function(t,r){t[r]=function(){var n=arguments;return t.ready().then(function(){return t[r].apply(t,n)})}})(this,eA[t])},e.prototype.createInstance=function(t){return new e(t)},e}());r.exports=eS},{3:3}]},{},[4])(4)})}),tF=es_$e((t,r)=>{var n,l;n="u">typeof self?self:t,l=function(t){var r=/^~~local_forage_type~([^~]+)~/,n=Object.prototype.toString;function I(t){var r=.75*t.length,n=t.length;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);for(var l=new ArrayBuffer(r),h=new Uint8Array(l),y=0,E=0;y<n;y+=4){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[y]),A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[y+1]),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[y+2]),D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t[y+3]);h[E++]=b<<2|A>>4,h[E++]=(15&A)<<4|S>>2,h[E++]=(3&S)<<6|63&D}return l}function M(t){for(var r=new Uint8Array(t),n="",l=0;l<r.length;l+=3)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r[l]>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&r[l])<<4|r[l+1]>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&r[l+1])<<2|r[l+2]>>6]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&r[l+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function _(t,r){return(t.name||r.name)+"/"+(t.storeName||r.storeName)+"/"}function B(t,r){r&&t.then(function(t){r(null,t)},function(t){r(t)})}function z(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function Z(t,r){var n=this;if(r=z.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var l=this.config();t.name=t.name||l.name,t.storeName=t.storeName||l.storeName}return{promise:t.name?new Promise(function(r){r(t.storeName?_(t,n._defaultConfig):t.name+"/")}):Promise.reject("Invalid arguments"),callback:r}}function F(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}var l={bufferToString:M,deserialize:function(t){if("__lfsc__:"!==t.substring(0,9))return JSON.parse(t);var n,l=t.substring(13),h=t.substring(9,13);if("blob"===h&&r.test(l)){var y=l.match(r);n=y[1],l=l.substring(y[0].length)}var E=I(l);switch(h){case"arbf":return E;case"blob":return function(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(y){if("TypeError"!==y.name)throw y;for(var n="u">typeof BlobBuilder?BlobBuilder:"u">typeof MSBlobBuilder?MSBlobBuilder:"u">typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,l=new n,h=0;h<t.length;h+=1)l.append(t[h]);return l.getBlob(r.type)}}([E],{type:n});case"si08":return new Int8Array(E);case"ui08":return new Uint8Array(E);case"uic8":return new Uint8ClampedArray(E);case"si16":return new Int16Array(E);case"ur16":return new Uint16Array(E);case"si32":return new Int32Array(E);case"ui32":return new Uint32Array(E);case"fl32":return new Float32Array(E);case"fl64":return new Float64Array(E);default:throw Error("Unkown type: "+h)}},serialize:function(t,r){var l="";if(t&&(l=n.call(t)),t&&("[object ArrayBuffer]"===l||t.buffer&&"[object ArrayBuffer]"===n.call(t.buffer))){var h=void 0,y="__lfsc__:";t instanceof ArrayBuffer?(h=t,y+="arbf"):(h=t.buffer,"[object Int8Array]"===l?y+="si08":"[object Uint8Array]"===l?y+="ui08":"[object Uint8ClampedArray]"===l?y+="uic8":"[object Int16Array]"===l?y+="si16":"[object Uint16Array]"===l?y+="ur16":"[object Int32Array]"===l?y+="si32":"[object Uint32Array]"===l?y+="ui32":"[object Float32Array]"===l?y+="fl32":"[object Float64Array]"===l?y+="fl64":r(Error("Failed to get type for BinaryArray"))),r(y+M(h))}else if("[object Blob]"===l){var E=new FileReader;E.onload=function(){r("__lfsc__:blob~~local_forage_type~"+t.type+"~"+M(this.result))},E.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),r(null,n)}},stringToBuffer:I},h={},y=function(){function a(t){this.kp=t,this.data={}}return a.resolve=function(t){return h[t]||(h[t]=new a(t)),h[t]},a.prototype.clear=function(){this.data={}},a.prototype.drop=function(){this.clear(),delete h[this.kp]},a.prototype.get=function(t){return this.data[t]},a.prototype.key=function(t){return this.keys()[t]},a.prototype.keys=function(){return Object.keys(this.data)},a.prototype.rm=function(t){delete this.data[t]},a.prototype.set=function(t,r){this.data[t]=r},a}();t._support=!0,t._driver="localforage-driver-memory",t._initStorage=function(t){var r=t?function m(t){if(null===t||"object"!=typeof t||"isActiveClone"in t)return t;var r,n,l=t instanceof Date?new Date(t):t.constructor();try{for(var h,y,E,b=(h=Object.keys(t),y="function"==typeof Symbol&&h[Symbol.iterator],E=0,y?y.call(h):{next:function(){return h&&E>=h.length&&(h=void 0),{value:h&&h[E++],done:!h}}}),A=b.next();!A.done;A=b.next()){var S=A.value;Object.prototype.hasOwnProperty.call(t,S)&&(t.isActiveClone=null,l[S]=m(t[S]),delete t.isActiveClone)}}catch(t){r={error:t}}finally{try{A&&!A.done&&(n=b.return)&&n.call(b)}finally{if(r)throw r.error}}return l}(t):{},n=_(r,this._defaultConfig),h=y.resolve(n);return this._dbInfo=r,this._dbInfo.serializer=l,this._dbInfo.keyPrefix=n,this._dbInfo.mStore=h,Promise.resolve()},t.clear=function(t){var r=this,n=this.ready().then(function(){r._dbInfo.mStore.clear()});return B(n,t),n},t.dropInstance=function(t,r){var n=Z.apply(this,arguments),l=n.promise,h=n.callback;return B(l.then(function(t){y.resolve(t).drop()}),h),l},t.getItem=function(t,r){var n=this;t=F(t);var l=this.ready().then(function(){var r=n._dbInfo.mStore.get(t);return null==r?null:n._dbInfo.serializer.deserialize(r)});return B(l,r),l},t.iterate=function(t,r){var n=this,l=this.ready().then(function(){for(var r=n._dbInfo.mStore,l=r.keys(),h=0;h<l.length;h++){var y=r.get(l[h]);if(y&&(y=n._dbInfo.serializer.deserialize(y)),void 0!==(y=t(y,l[h],h+1)))return y}});return B(l,r),l},t.key=function(t,r){var n=this,l=this.ready().then(function(){var r;try{r=n._dbInfo.mStore.key(t),void 0===r&&(r=null)}catch{r=null}return r});return B(l,r),l},t.keys=function(t){var r=this,n=this.ready().then(function(){return r._dbInfo.mStore.keys()});return B(n,t),n},t.length=function(t){var r=this.keys().then(function(t){return t.length});return B(r,t),r},t.removeItem=function(t,r){var n=this;t=F(t);var l=this.ready().then(function(){n._dbInfo.mStore.rm(t)});return B(l,r),l},t.setItem=function(t,r,n){var l=this;t=F(t);var h=this.ready().then(function(){void 0===r&&(r=null);var n=r;return new Promise(function(h,y){l._dbInfo.serializer.serialize(r,function(r,E){if(E)y(E);else try{l._dbInfo.mStore.set(t,r),h(n)}catch(t){y(t)}})})});return B(h,n),h},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof t&&"u">typeof r?l(t):"function"==typeof define&&define.amd?define("localforage-driver-memory",["exports"],l):l(n.LocalforageDriverMemory={})}),tG=es_Ze(tB()),tz=es_Ze(tF()),tW={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"},tH=(Object.assign(e0,{platform:"web",sdkName:"magic-sdk",version:"13.6.2",defaultEndpoint:"https://auth.magic.link/",ViewController:class extends t${constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(t=>{let L=()=>{var r;if(r=encodeURIComponent(this.parameters),[].slice.call(document.querySelectorAll(".magic-iframe")).find(t=>t.src.includes(r)))new e4(ef.DuplicateIframe,"Duplicate iframes found.").log();else{let r=document.createElement("iframe");r.classList.add("magic-iframe"),r.dataset.magicIframeLabel=Ae(this.endpoint).host,r.title="Secure Modal",r.src=Ae(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,function(t){for(let[r,n]of Object.entries(tW))t.style[r]=n}(r),document.body.appendChild(r),t(r)}};["loaded","interactive","complete"].includes(document.readyState)?L():window.addEventListener("load",L,!1)}),window.addEventListener("message",t=>{var r;if(t.origin===this.endpoint&&t.data&&t.data.msgType&&this.messageHandlers.size)for(let n of(t.data.response=null!=(r=t.data.response)?r:{},this.messageHandlers.values()))n(t)})}showOverlay(){return es_se(this,null,function*(){let t=yield this.iframe;t.style.display="block",this.activeElement=document.activeElement,t.focus()})}hideOverlay(){return es_se(this,null,function*(){var t;(yield this.iframe).style.display="none",null!=(t=this.activeElement)&&t.focus&&this.activeElement.focus(),this.activeElement=null})}_post(t){return es_se(this,null,function*(){let r=yield this.iframe;if(r&&r.contentWindow)r.contentWindow.postMessage(t,this.endpoint);else throw new e2(el.ModalNotReady,"Modal is not ready.")})}},configureStorage:()=>es_se(void 0,null,function*(){let t=tG.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield t.defineDriver(tz),yield t.setDriver([tG.default.INDEXEDDB,tG.default.LOCALSTORAGE,tz._driver]),t})}),tL),tq=Object.create,tK=Object.defineProperty,tV=Object.getOwnPropertyDescriptor,tX=Object.getOwnPropertyNames,tY=Object.getPrototypeOf,tJ=Object.prototype.hasOwnProperty,es_H=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),dist_es_se=(t,r,n,l)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let h of tX(r))tJ.call(t,h)||h===n||tK(t,h,{get:()=>r[h],enumerable:!(l=tV(r,h))||l.enumerable});return t},es_T=(t,r,n)=>(n=null!=t?tq(tY(t)):{},dist_es_se(!r&&t&&t.__esModule?n:tK(n,"default",{value:t,enumerable:!0}),t)),es_C=(t,r,n)=>new Promise((l,h)=>{var w=t=>{try{d(n.next(t))}catch(t){h(t)}},R=t=>{try{d(n.throw(t))}catch(t){h(t)}},d=t=>t.done?l(t.value):Promise.resolve(t.value).then(w,R);d((n=n.apply(t,r)).next())}),tZ=es_H((t,r)=>{var n,l;n=t,l=function(){var t,r,n,l,h,y,E,b,A,S,D,U,H=H||(t=Math,r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),h=(l=(n={}).lib={}).Base={extend:function(t){var n=r(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},y=l.WordArray=h.extend({init:function(t,r){t=this.words=t||[],void 0!=r?this.sigBytes=r:this.sigBytes=4*t.length},toString:function(t){return(t||b).stringify(this)},concat:function(t){var r=this.words,n=t.words,l=this.sigBytes,h=t.sigBytes;if(this.clamp(),l%4)for(var y=0;y<h;y++){var E=n[y>>>2]>>>24-y%4*8&255;r[l+y>>>2]|=E<<24-(l+y)%4*8}else for(var y=0;y<h;y+=4)r[l+y>>>2]=n[y>>>2];return this.sigBytes+=h,this},clamp:function(){var r=this.words,n=this.sigBytes;r[n>>>2]&=4294967295<<32-n%4*8,r.length=t.ceil(n/4)},clone:function(){var t=h.clone.call(this);return t.words=this.words.slice(0),t},random:function(r){for(var n,l=[],c=function(r){var r=r,n=987654321;return function(){var l=((n=36969*(65535&n)+(n>>16)&4294967295)<<16)+(r=18e3*(65535&r)+(r>>16)&4294967295)&4294967295;return l/=4294967296,(l+=.5)*(t.random()>.5?1:-1)}},h=0;h<r;h+=4){var E=c(4294967296*(n||t.random()));n=987654071*E(),l.push(4294967296*E()|0)}return new y.init(l,r)}}),b=(E=n.enc={}).Hex={stringify:function(t){for(var r=t.words,n=t.sigBytes,l=[],h=0;h<n;h++){var y=r[h>>>2]>>>24-h%4*8&255;l.push((y>>>4).toString(16)),l.push((15&y).toString(16))}return l.join("")},parse:function(t){for(var r=t.length,n=[],l=0;l<r;l+=2)n[l>>>3]|=parseInt(t.substr(l,2),16)<<24-l%8*4;return new y.init(n,r/2)}},A=E.Latin1={stringify:function(t){for(var r=t.words,n=t.sigBytes,l=[],h=0;h<n;h++){var y=r[h>>>2]>>>24-h%4*8&255;l.push(String.fromCharCode(y))}return l.join("")},parse:function(t){for(var r=t.length,n=[],l=0;l<r;l++)n[l>>>2]|=(255&t.charCodeAt(l))<<24-l%4*8;return new y.init(n,r)}},S=E.Utf8={stringify:function(t){try{return decodeURIComponent(escape(A.stringify(t)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(t){return A.parse(unescape(encodeURIComponent(t)))}},D=l.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=S.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(r){var n=this._data,l=n.words,h=n.sigBytes,E=this.blockSize,b=h/(4*E),A=(b=r?t.ceil(b):t.max((0|b)-this._minBufferSize,0))*E,S=t.min(4*A,h);if(A){for(var D=0;D<A;D+=E)this._doProcessBlock(l,D);var U=l.splice(0,A);n.sigBytes-=S}return new y.init(U,S)},clone:function(){var t=h.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),l.Hasher=D.extend({cfg:h.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){D.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(r,n){return new t.init(n).finalize(r)}},_createHmacHelper:function(t){return function(r,n){return new U.HMAC.init(t,n).finalize(r)}}}),U=n.algo={},n);return H},"object"==typeof t?r.exports=t=l():"function"==typeof define&&define.amd?define([],l):n.CryptoJS=l()}),tQ=es_H((t,r)=>{var n,l;n=t,l=function(t){return function(r){var n=t.lib,l=n.WordArray,h=n.Hasher,y=t.algo,E=[],b=[];(function(){function f(t){return(t-(0|t))*4294967296|0}for(var t=2,n=0;n<64;)(function(t){for(var n=r.sqrt(t),l=2;l<=n;l++)if(!(t%l))return!1;return!0})(t)&&(n<8&&(E[n]=f(r.pow(t,.5))),b[n]=f(r.pow(t,1/3)),n++),t++})();var A=[],S=y.SHA256=h.extend({_doReset:function(){this._hash=new l.init(E.slice(0))},_doProcessBlock:function(t,r){for(var n=this._hash.words,l=n[0],h=n[1],y=n[2],E=n[3],S=n[4],D=n[5],U=n[6],H=n[7],q=0;q<64;q++){if(q<16)A[q]=0|t[r+q];else{var K=A[q-15],ee=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,et=A[q-2],er=(et<<15|et>>>17)^(et<<13|et>>>19)^et>>>10;A[q]=ee+A[q-7]+er+A[q-16]}var ei=S&D^~S&U,eo=l&h^l&y^h&y,ea=(l<<30|l>>>2)^(l<<19|l>>>13)^(l<<10|l>>>22),es=H+((S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25))+ei+b[q]+A[q],ec=ea+eo;H=U,U=D,D=S,S=E+es|0,E=y,y=h,h=l,l=es+ec|0}n[0]=n[0]+l|0,n[1]=n[1]+h|0,n[2]=n[2]+y|0,n[3]=n[3]+E|0,n[4]=n[4]+S|0,n[5]=n[5]+D|0,n[6]=n[6]+U|0,n[7]=n[7]+H|0},_doFinalize:function(){var t=this._data,n=t.words,l=8*this._nDataBytes,h=8*t.sigBytes;return n[h>>>5]|=128<<24-h%32,n[(h+64>>>9<<4)+14]=r.floor(l/4294967296),n[(h+64>>>9<<4)+15]=l,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=h.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA256=h._createHelper(S),t.HmacSHA256=h._createHmacHelper(S)}(Math),t.SHA256},"object"==typeof t?r.exports=t=l(tZ()):"function"==typeof define&&define.amd?define(["./core"],l):l(n.CryptoJS)}),t0=es_H((t,r)=>{var n,l;n=t,l=function(t){var r;return r=t.lib.WordArray,t.enc.Base64={stringify:function(t){var r=t.words,n=t.sigBytes,l=this._map;t.clamp();for(var h=[],y=0;y<n;y+=3)for(var E=r[y>>>2]>>>24-y%4*8&255,b=r[y+1>>>2]>>>24-(y+1)%4*8&255,A=r[y+2>>>2]>>>24-(y+2)%4*8&255,S=E<<16|b<<8|A,D=0;D<4&&y+.75*D<n;D++)h.push(l.charAt(S>>>6*(3-D)&63));var U=l.charAt(64);if(U)for(;h.length%4;)h.push(U);return h.join("")},parse:function(t){var n=t.length,l=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var y=0;y<l.length;y++)h[l.charCodeAt(y)]=y}var E=l.charAt(64);if(E){var b=t.indexOf(E);-1!==b&&(n=b)}return function(t,n,l){for(var h=[],y=0,E=0;E<n;E++)if(E%4){var b=l[t.charCodeAt(E-1)]<<E%4*2,A=l[t.charCodeAt(E)]>>>6-E%4*2;h[y>>>2]|=(b|A)<<24-y%4*8,y++}return r.create(h,y)}(t,n,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64},"object"==typeof t?r.exports=t=l(tZ()):"function"==typeof define&&define.amd?define(["./core"],l):l(n.CryptoJS)}),t1=((et=t1||{}).ParseRedirectResult="magic_oauth_parse_redirect_result",et),t2=((er=t2||{}).InvalidRequest="invalid_request",er.InvalidClient="invalid_client",er.InvalidScope="invalid_scope",er.InvalidGrant="invalid_grant",er.UnauthorizedClient="unauthorized_client",er.UnsupportedResponseType="unsupported_response_type",er.UnsupportedGrantType="unsupported_grant_type",er.UnsupportedTokenType="unsupported_token_type",er.AccessDenied="access_denied",er.ServerError="server_error",er.TemporarilyUnavailable="temporarily_unavailable",er),t6=es_T(tQ()),t4=es_T(t0()),t3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t5="undefined"!=typeof window&&!!window.crypto,t8=t5&&!!window.crypto.subtle;function es_M(t){var r;return r=t instanceof ArrayBuffer?btoa(Array.from(new Uint8Array(t)).map(t=>String.fromCharCode(t)).join("")):t4.default.stringify(t),r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function es_N(t){let r=new Uint8Array(t);if(t5)window.crypto.getRandomValues(r);else for(let n=0;n<t;n+=1)r[n]=Math.floor(Math.random()*Math.floor(255));return Array.from(r).map(t=>t3[t%t3.length]).join("")}var t9=class extends tT.Internal{constructor(){super(...arguments),this.name="oauth",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(t){return this.utils.createPromiEvent(r=>es_C(this,null,function*(){let{provider:n,query:l}=yield dist_es_pe.call(this,t);window.location.href=new URL(`/v1/oauth2/${n}/start?${l}`,this.sdk.endpoint).href,r()}))}getRedirectResult(){let t=window.location.search,r=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",r),es_he.call(this,t)}},t7="oauth_redirect_metadata";function dist_es_pe(t){return es_C(this,null,function*(){yield this.utils.storage.removeItem(t7);let{provider:r,redirectURI:n,scope:l,loginHint:h}=t,{verifier:y,challenge:E,state:b}=yield function(){return es_C(this,null,function*(){let t=es_N(128),r=es_N(128),n=yield function(t){return es_C(this,null,function*(){if(t8){let r=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",r).then(es_M)}return es_M((0,t6.default)(t))})}(r);return{verifier:r,challenge:n,state:t}})}(),A=JSON.stringify({verifier:y,state:b});return yield this.utils.storage.setItem(t7,A),{query:[`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`,`magic_challenge=${encodeURIComponent(E)}`,`state=${encodeURIComponent(b)}`,`platform=${encodeURIComponent("web")}`,l&&`scope=${encodeURIComponent(l.join(" "))}`,n&&`redirect_uri=${encodeURIComponent(n)}`,h&&`login_hint=${encodeURIComponent(h)}`].reduce((t,r)=>r?`${t}&${r}`:t),provider:r,redirectURI:n}})}function es_he(t){return this.utils.createPromiEvent((r,n)=>es_C(this,null,function*(){var l;let{verifier:h,state:y}=JSON.parse((yield this.utils.storage.getItem(t7)));this.utils.storage.removeItem(t7);let E=this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result",[t,h,y]),b=yield this.request(E);b.error&&n(this.createError(b.error,null!=(l=b.error_description)?l:"An error occurred.",{errorURI:b.error_uri,provider:b.provider})),r(b)}))}var rt=n(83287);n(65007);let MagicBaseConnector=class MagicBaseConnector extends rt.W{constructor(t){super(t),(0,ea._)(this,"id","magic-link"),(0,ea._)(this,"name","Magic Link"),(0,ea._)(this,"ready",!0),this.magicOptions=t.options}async getAccount(){let t=new ec.Q(await this.getProvider()),r=t.getSigner(),n=await r.getAddress();return n.startsWith("0x")?n:`0x${n}`}async getProvider(){if(this.provider)return this.provider;let t=this.getMagicSDK();return this.provider=t.rpcProvider,this.provider}async getSigner(){let t=new ec.Q(await this.getProvider()),r=await t.getSigner();return r}async isAuthorized(){let t=this.getMagicSDK();try{return await t.user.isLoggedIn()}catch(t){return!1}}onAccountsChanged(t){0===t.length?this.emit("disconnect"):t[0]&&this.emit("change",{account:eu.getAddress(t[0])})}onChainChanged(t){let r=(0,es.n)(t),n=this.isChainUnsupported(r);this.emit("change",{chain:{id:r,unsupported:n}})}onDisconnect(){this.emit("disconnect")}async disconnect(){let t=this.getMagicSDK();await t.user.logout()}};var rr=new WeakMap,ri=new WeakMap;let MagicAuthConnector=class MagicAuthConnector extends MagicBaseConnector{constructor(t){super(t),(0,eo._)(this,rr,{writable:!0,value:void 0}),(0,eo._)(this,ri,{writable:!0,value:void 0}),this.magicSdkConfiguration=t.options.magicSdkConfiguration,(0,eo.a)(this,ri,t.options.type),this.oauthProviders=t.options.oauthOptions?.providers||[],this.oauthRedirectURI=t.options.oauthOptions?.redirectURI}async connect(t){if(!this.magicOptions.apiKey)throw Error("Magic API Key is not provided.");try{let r;t.chainId&&this.initializeMagicSDK({chainId:t.chainId});let n=await this.getProvider();this.setupListeners(),this.emit("message",{type:"connecting"});let l=await this.isAuthorized();try{r=await this.getChainId()}catch(t){r=0}if((0,eo.a)(this,rr,r),l)return{provider:n,chain:{id:r,unsupported:!1},account:await this.getAccount()};let h=this.getMagicSDK();if("connect"===(0,eo.b)(this,ri))("email"in t||"phoneNumber"in t)&&console.warn("Passing email or phoneNumber is not required for Magic Connect"),await h.wallet.connectWithUI();else if("oauthProvider"in t)await h.oauth.loginWithRedirect({provider:t.oauthProvider,redirectURI:this.oauthRedirectURI||window.location.href}),await new Promise(t=>{setTimeout(t,1e4)});else if("email"in t)await h.auth.loginWithMagicLink({email:t.email,showUI:!0});else if("phoneNumber"in t)await h.auth.loginWithSMS({phoneNumber:t.phoneNumber});else throw Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");let y=await this.getSigner(),E=await y.getAddress();return E.startsWith("0x")||(E=`0x${E}`),{account:E,chain:{id:r,unsupported:!1},provider:n}}catch(t){throw console.error(t),Error("Something went wrong")}}async getChainId(){let t=this.magicSdkConfiguration?.network;if("object"==typeof t){let r=t.chainId;if(r)return(0,es.n)(r)}throw Error("Chain ID is not defined")}initializeMagicSDK(){let{chainId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={...this.magicSdkConfiguration,extensions:[new t9]};if(t){let n=this.chains.find(r=>r.chainId===t);n&&(r.network={rpcUrl:n.rpc[0]||"",chainId:n.chainId})}return this.magicSDK=new tH(this.magicOptions.apiKey,r),this.provider=this.magicSDK.rpcProvider,this.magicSDK}getMagicSDK(){return this.magicSDK?this.magicSDK:this.initializeMagicSDK()}async setupListeners(){let t=await this.getProvider();t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)}async switchChain(t){let r=this.chains.find(r=>r.chainId===t);if(!r)throw Error("Chain not found");return(0,eo.b)(this,rr)!==t&&this.initializeMagicSDK({chainId:t}),r}}}}]);